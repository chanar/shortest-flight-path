{"version":3,"sources":["index.js"],"names":["myForm","document","forms","getIconPath","index","length","path","createFlightRoutes","routes","shortestRoute","routeChanges","possibleRouteChanges","routesContainer","getElementById","innerHTML","shortestRouteDivContainer","createElement","classList","add","shortestRouteTitleEl","hasChanges","forEach","iata","airportHTML","appendChild","insertBefore","routeChangeTitleEl","Object","keys","indexOfRoute","lastIndexOf","some","slice","route","r","concat","newRouteDivContainer","iataNew","getJSON","url","next","fetch","then","data","status","Error","json","catch","addEventListener","event","preventDefault","src","value","toUpperCase","dst","max","lib","err","res","flightRoutes"],"mappings":";AAAA,IAAMA,EAASC,SAASC,MAAM,GAqB9B,SAASC,EAAYC,EAAOC,GAiBnBC,OAdO,IAAVF,EACF,4HAGSA,IAAUC,EACnB,6HAIA,sHAQJ,SAASE,EAAmBC,GACpBC,IAAAA,EAAgBD,EAAOC,cAC1B,GAACA,EAAD,CAEGC,IAAAA,EAAeF,EAAOG,qBAEtBC,EAAkBX,SAASY,eAAe,iBAChDD,EAAgBE,UAAY,GAEtBC,IAAAA,EAA4Bd,SAASe,cAAc,OACzDD,EAA0BE,UAAUC,IAAI,OAAwBT,gBAAAA,OAAAA,EAAcJ,QAAU,cAAe,QAAS,SAE1Gc,IAAAA,EAAuBlB,SAASe,cAAc,MA0BhDI,GAzBJD,EAAqBF,UAAUC,IAAI,cAAe,YAClDC,EAAqBL,UAAY,iBAEjCL,EAAcY,QAAQ,SAASC,EAAMlB,GAC7BmB,IAAAA,EAKMpB,qYAAAA,OAAAA,EAAYC,EAAM,EAAGK,EAAcJ,QAIViB,mIAAAA,OAAAA,EATrC,gEAeAP,EAA0BD,WAAaS,IAGzCX,EAAgBY,YAAYT,GAC5BH,EAAgBa,aAAaN,EAAsBJ,GAE/CK,EAAWV,GAAe,CACtBgB,IAAAA,EAAqBzB,SAASe,cAAc,MAClDU,EAAmBT,UAAUC,IAAI,cAAe,WAAY,SAC5DQ,EAAmBZ,UAAY,oBAC/BF,EAAgBY,YAAYE,GAE5BC,OAAOC,KAAKlB,GAAcW,QAAQ,SAASC,GACrCO,IAAAA,EAAepB,EAAcqB,YAAYR,GAEzCS,EADWtB,EACKuB,MAAM,EAAGH,GAE7BnB,EAAaY,GAAMD,QAAQ,SAASY,GAC5BC,IAAAA,EAAIH,EAAKI,OAAOF,GAEhBG,EAAuBnC,SAASe,cAAc,OACpDoB,EAAqBnB,UAAUC,IAAI,OAAwBgB,gBAAAA,OAAAA,EAAE7B,OAAO,GAAK,cAAe,QAAS,SAEjG6B,EAAEb,QAAQ,SAASgB,EAASjC,GACtBmB,IAAAA,EAAJ,GAEEA,GADEnB,IAAUyB,EASuBP,0mBAAAA,OAAAA,EAgBAe,gjCAAAA,OAAAA,EAxBnC,sEAiCUlC,kWAAAA,OAAAA,EAAYC,EAAM,EAAG8B,EAAE7B,QAIEgC,2JAAAA,OAAAA,EARnC,sEAcFD,EAAqBtB,WAAaS,IAGpCX,EAAgBY,YAAYY,SAMpC,SAAShB,EAAYV,GACfiB,QAAAA,OAAOC,KAAKlB,GAAcL,OAOhC,SAASiC,EAAQC,EAAKC,GACpBC,MAAMF,GACHG,KAAK,SAAUC,GACRA,GAAAA,EAAKC,QAAU,KAAOD,EAAKC,OAAS,IAC7BD,OAAAA,EAGXH,EAAK,IAAIK,MAAM,8DAElBH,KAAK,SAAUC,GACZH,EAAK,KAAMG,EAAKG,UAEnBC,MAAM,WACHP,EAAK,IAAIK,MAAM,iDA1KvB7C,EAAOgD,iBAAiB,SAAU,SAAUC,GAC1CA,EAAMC,iBACAC,IAAAA,EAAMlD,SAASY,eAAe,aAAauC,MAAMC,cACjDC,EAAMrD,SAASY,eAAe,WAAWuC,MAAMC,cAC/CE,EAAMtD,SAASY,eAAe,cAAcuC,MAC5CI,EAAMvD,SAASY,eAAe,WAAWuC,MAE/Cd,EAAgCa,wBAAAA,OAAAA,EAAWG,SAAAA,OAAAA,EAAkBC,gBAAAA,OAAAA,EAAWC,SAAAA,OAAAA,GAAO,SAAUC,EAAKd,GACxFc,GAAAA,EACKA,OAAAA,EAGTd,EAAKD,KAAK,SAASgB,GACjBnD,EAAmBmD,EAAIf,KAAKgB","file":"src.a3af689e.js","sourceRoot":"../src","sourcesContent":["const myForm = document.forms[0];\n\nmyForm.addEventListener('submit', function (event) {\n  event.preventDefault();\n  const src = document.getElementById('departure').value.toUpperCase()\n  const dst = document.getElementById('arrival').value.toUpperCase()\n  const max = document.getElementById('maxflights').value\n  const lib = document.getElementById('algoLib').value\n\n  getJSON(`/api/routes/path?src=${src}&dst=${dst}&maxflights=${max}&lib=${lib}`, function (err, data) {\n    if (err) {\n      return err;\n    }\n\n    data.then(function(res) {\n      createFlightRoutes(res.data.flightRoutes)\n    })\n  });\n\n});\n\nfunction getIconPath(index, length) {\n  let path = '';\n\n  if (index === 1) {\n    path = `\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\" />\n    `\n  } else if (index === length) {\n    path = `\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6\" />\n    `\n  } else {\n    path = `\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M14 5l7 7m0 0l-7 7m7-7H3\" />\n    `\n  }\n\n  return path;\n}\n\nfunction createFlightRoutes(routes) {\n  const shortestRoute = routes.shortestRoute\n  if(!shortestRoute) return;\n\n  const routeChanges = routes.possibleRouteChanges\n\n  const routesContainer = document.getElementById('flight-routes')\n  routesContainer.innerHTML = ''\n\n  const shortestRouteDivContainer = document.createElement('div')\n  shortestRouteDivContainer.classList.add('grid', `lg:grid-cols-${shortestRoute.length}`, 'grid-cols-1', 'gap-4', 'mt-10')\n\n  const shortestRouteTitleEl = document.createElement('h2')\n  shortestRouteTitleEl.classList.add('text-center', 'text-2xl')\n  shortestRouteTitleEl.innerHTML = 'Shortest route'\n\n  shortestRoute.forEach(function(iata, index) {\n    const airportHTML = `\n      <div class=\"text-gray-700 text-center bg-gray-400\">\n        <div class=\"flex flex-row bg-white shadow-sm rounded p-4\">\n          <div class=\"flex items-center justify-center flex-shrink-0 h-12 w-12 rounded-xl bg-blue-100 text-blue-500\">\n            <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n              ${getIconPath(index+1, shortestRoute.length)}\n            </svg>\n          </div>\n          <div class=\"flex items-center ml-4\">\n            <div class=\"font-semibold\">${iata}</div>\n          </div>\n        </div>\n      </div>\n    `\n\n    shortestRouteDivContainer.innerHTML += airportHTML;\n  })\n\n  routesContainer.appendChild(shortestRouteDivContainer)\n  routesContainer.insertBefore(shortestRouteTitleEl, shortestRouteDivContainer)\n\n  if (hasChanges(routeChanges)) {\n    const routeChangeTitleEl = document.createElement('h2')\n    routeChangeTitleEl.classList.add('text-center', 'text-2xl', 'mt-20')\n    routeChangeTitleEl.innerHTML = 'Additional routes'\n    routesContainer.appendChild(routeChangeTitleEl)\n\n    Object.keys(routeChanges).forEach(function(iata) {\n      let indexOfRoute = shortestRoute.lastIndexOf(iata)\n      let newRoute = shortestRoute\n      let some = newRoute.slice(0, indexOfRoute)\n\n      routeChanges[iata].forEach(function(route) {\n        const r = some.concat(route)\n\n        const newRouteDivContainer = document.createElement('div')\n        newRouteDivContainer.classList.add('grid', `lg:grid-cols-${r.length+1}`, 'grid-cols-1', 'gap-4', 'mt-10')\n\n        r.forEach(function(iataNew, index) {\n          let airportHTML = ``;\n          if (index === indexOfRoute) {\n            airportHTML += `\n              <div class=\"flex flex-row bg-white shadow-sm rounded p-4\">\n                <div class=\"flex items-center justify-center flex-shrink-0 h-12 w-12 rounded-xl bg-blue-100 text-blue-500\">\n                  <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6\" />\n                  </svg>\n                </div>\n                <div class=\"flex items-center ml-4 mr-4\">\n                  <div class=\"font-semibold\">${iata}</div>\n                </div>\n                <div class=\"flex items-center justify-center flex-shrink-0 h-12 w-12 text-blue-500\">\n                  <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M14 5l7 7m0 0l-7 7m7-7H3\" />\n                  </svg>\n                </div>\n              </div>\n\n              <div class=\"flex flex-row bg-white shadow-sm rounded p-4\">\n                <div class=\"flex items-center justify-center flex-shrink-0 h-12 w-12 rounded-xl bg-blue-100 text-blue-500\">\n                  <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\" />\n                  </svg>\n                </div>\n                <div class=\"flex items-center ml-4\">\n                  <div class=\"font-semibold\">${iataNew}</div>\n                </div>\n              </div>\n            `\n          } else {\n            airportHTML += `\n              <div class=\"flex flex-row bg-white shadow-sm rounded p-4\">\n                <div class=\"flex items-center justify-center flex-shrink-0 h-12 w-12 rounded-xl bg-blue-100 text-blue-500\">\n                  <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                    ${getIconPath(index+1, r.length)}\n                  </svg>\n                </div>\n                <div class=\"flex items-center ml-4\">\n                  <div class=\"font-semibold\">${iataNew}</div>\n                </div>\n              </div>\n            `;\n          }\n\n          newRouteDivContainer.innerHTML += airportHTML;\n        })\n\n        routesContainer.appendChild(newRouteDivContainer);\n      })\n    })\n  }\n}\n\nfunction hasChanges (routeChanges) {\n  if (Object.keys(routeChanges).length) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction getJSON(url, next) {\n  fetch(url)\n    .then(function (data) {\n        if (data.status >= 200 && data.status < 300) {\n            return data;\n        }\n\n        next(new Error('We reached our target server, but it returned an error.'));\n    })\n    .then(function (data) {\n        next(null, data.json());\n    })\n    .catch(function () {\n        next(new Error('There was a connection error of some sort.'));\n    });\n}\n"]}